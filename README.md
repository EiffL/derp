# derp

A first attempt at a simple LSST DRP catalog emulator. 

A number of planned DESC project will either need, or could use, a wide area mock LSST catalog, including stars, galaxies, and artifacts, with realistic errors and uncertainties, and with the correct anticipated schema, as would be generated by the LSST Facility's Data Release Production (DRP) pipeline and released to the LSST science community. Most applications will need a mock Object table, while some will need mock ForcedDIASource light curves. DC2 will provide a 300 square degree DRP catalog that we can use to train an emulator, that can then take in a much larger "truth" catalog and generate the corresponding wide area mock LSST catalog.

## Limitations

What makes `derp` so simple?
* We ignore all blended objects.
* We only emulate the DRP Object table, so Sources or DIASources.
* The code only runs at NERSC, where the DC2 data live. We are targeting the DC2 Run 1.1p Truth table and DRP Object table.
* We plan a naive application of a generative machine learning model, to map N truth properties to M observed properties.

## Sources

This project builds on:
- Sean Mclaughlin's CMU 2018 Hack Day project [`blendtec`](https://github.com/mclaughlin6464/blendtec)
- The [DC2-analysis tutorial notebooks](https://github.com/LSSTDESC/DC2-analysis/blob/master/tutorials/README.rst)

## Contact

Comments, questions, feedback etc welcome, via the [issues](https://github.com/LSSTDESC/derp/issues/new?body=@drphilmarshall).
This project was started at the 2018 sprint week in Edinburgh, and anyone is welcome to join in. See the [contributors]() page for more people to contact.

This is research in progress. The software  in this repo is under development and not yet released. It was developed within the LSST DESC using LSST DESC resources, and so meets the criteria given in, and is bound by, the LSST DESC Publication Policy for being a “DESC product”. We welcome requests to access the code for non-DESC use; if you wish to use the code outside DESC please contact the developers via the [issues](https://github.com/LSSTDESC/derp/issues/new?body=@drphilmarshall). 

If you use any of the ideas or code from this repo in your own research, please cite it as _LSST DESC, in preparation_ and provide a link to this repo: https://github.com/LSSTDESC/derp

## Contributing

To help develop `derp`, you'll need a clone of this repo in your `$HOME/desc` folder at NERSC:
```bash
cd ~/desc
git clone git@github.com:LSSTDESC/derp.git
```
Then, in your notebooks you'll need to insert this to your python path as you need it, like this:
```python
import os, sys
derp_dir = os.environ['HOME']+'/desc/derp'
sys.path.insert(0, derp_dir)
```
To push to a branch on the base repo you'll need Write access: contact @drphilmarshall about this. Alternatively, feel free to fork the repo and submit PRs from afar.
